<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive Time-to-Kill (TTK) visualization for Battlefield 6 weapons. Compare weapon stats, damage drop-off, and optimal ranges.">
    <meta name="keywords" content="Battlefield 6, TTK, Time to Kill, weapon stats, damage, DPS">
    <meta name="author" content="Battlefield Community">
    <title>Battlefield 6 - TTK Visualization</title>

    <!-- Plotly.js CDN -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js" charset="utf-8"></script>

    <!-- Papa Parse for CSV parsing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéØ</text></svg>">
</head>
<body>
    <!-- Skip Links -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#weapon-table" class="skip-link">Skip to weapon table</a>
    
    <!-- Header -->
    <header>
        <div class="container">
            <h1>‚ö° Battlefield 6 - TTK Analysis</h1>
            <p class="subtitle">Advanced weapon statistics and tactical damage visualization</p>
            <div class="header-actions">
                <button id="themeToggle" class="btn-secondary" aria-label="Toggle dark/light theme">
                    <span class="theme-icon">üåô</span> Theme
                </button>
                <a href="https://github.com/henryabraham52/BF6_TTK" target="_blank" rel="noopener" class="btn-secondary">
                    GitHub
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" id="main-content">
        <!-- Controls Section -->
        <section class="controls-section">
            <h2>‚öô Tactical Controls</h2>
            <div class="controls-grid">
                <div class="control-group">
                    <label for="weaponTypeFilter">Weapon Type:</label>
                    <select id="weaponTypeFilter" multiple size="8">
                        <option value="ALL" selected>All Weapons</option>
                        <option value="ASSAULT RIFLE">Assault Rifles</option>
                        <option value="CARBINE">Carbines</option>
                        <option value="SMG">SMGs</option>
                        <option value="LMG">LMGs</option>
                        <option value="DMR">DMRs</option>
                        <option value="SNIPER RIFLE">Sniper Rifles</option>
                        <option value="SHOTGUN">Shotguns</option>
                        <option value="PISTOL">Pistols</option>
                    </select>
                    <small>Hold Ctrl/Cmd to select multiple types (selecting specific types will deselect "All")</small>
                </div>

                <div class="control-group">
                    <label for="rangeSelector">Focus Range:</label>
                    <select id="rangeSelector">
                        <option value="10M" selected>10M (Close)</option>
                        <option value="20M">20M (Close-Mid)</option>
                        <option value="35M">35M (Mid)</option>
                        <option value="50M">50M (Mid-Long)</option>
                        <option value="70M">70M (Long)</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="chartType">Chart View:</label>
                    <select id="chartType">
                        <option value="damage" selected>Damage vs Range</option>
                        <option value="ttk">TTK Comparison</option>
                        <option value="rpm-dps">RPM vs DPS</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="fireMode">Method:</label>
                    <select id="fireMode">
                        <option value="hip" selected>Hip Fire (Instant)</option>
                        <option value="ads">ADS (+ Aim Time)</option>
                        <option value="recoil">Recoil Adjusted</option>
                    </select>
                    <small>
                        Hip Fire = instant shooting; ADS = includes aim down sights time; Recoil Adjusted = accounts for weapon precision & control with distance.
                    </small>
                </div>

                <div class="control-group" id="recoilImpactGroup" hidden>
                    <label for="recoilImpact">Recoil Impact: <span id="recoilImpactValue">4</span></label>
                    <input type="range" id="recoilImpact" min="1" max="5" step="1" value="4" list="recoilTicks">
                    <datalist id="recoilTicks">
                        <option value="1"></option>
                        <option value="2"></option>
                        <option value="3"></option>
                        <option value="4"></option>
                        <option value="5"></option>
                    </datalist>
                    <small>Adjust how strongly recoil reduces hit% (1 = low, 5 = high). Default: 4.</small>
                </div>

                <div class="control-group">
                    <button id="resetFilters" class="btn-primary">Reset Filters</button>
                    <button id="compareAll" class="btn-secondary">Compare All</button>
                </div>
            </div>
        </section>

        <!-- Statistics Summary -->
        <section class="stats-summary" id="statsSummary">
            <div class="stat-card">
                <span class="stat-label">Total Weapons</span>
                <span class="stat-value" id="totalWeapons">-</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Complete Data</span>
                <span class="stat-value" id="completeWeapons">-</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Weapon Types</span>
                <span class="stat-value" id="weaponTypes">-</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">Data Coverage</span>
                <span class="stat-value" id="dataCoverage">-</span>
            </div>
        </section>

        <!-- Main Chart -->
        <section class="chart-section">
            <div id="mainChart" class="chart-container"></div>
            <div class="chart-info">
                <p><strong>Note:</strong> Some weapons have incomplete data. Missing stats are shown as gaps in the visualization.</p>
            </div>
        </section>

        <!-- Secondary Charts Grid -->
        <section class="charts-grid">
            <div class="chart-box">
                <h3>üìä TTK by Range</h3>
                <div id="ttkChart" class="chart-container-small"></div>
            </div>
            <div class="chart-box">
                <h3>‚ö° DPS Comparison</h3>
                <div id="dpsChart" class="chart-container-small"></div>
            </div>
        </section>

        <!-- Weapon Details Table -->
        <section class="table-section" id="weapon-table">
            <h2>üìã Weapon Database</h2>
            <div class="table-controls">
                <input type="text" id="tableSearch" placeholder="Search weapons..." class="search-input">
                <button id="exportCSV" class="btn-secondary">üìä Export Data</button>
            </div>
            <div class="table-wrapper">
                <table id="weaponTable">
                    <thead>
                        <tr>
                            <th>Type</th>
                            <th>Weapon</th>
                            <th>10M</th>
                            <th>20M</th>
                            <th>35M</th>
                            <th>50M</th>
                            <th>70M</th>
                            <th>RPM</th>
                            <th>DPS</th>
                            <th>ADS (ms)</th>
                            <th>TTK (10M)</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="weaponTableBody">
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Contributing Section -->
        <section class="contribute-section">
            <h2>üõ† Join the Mission</h2>
            <p class="section-intro">This is a community-driven tactical database. Help us expand weapon intelligence.</p>
            <div class="contribute-grid">
                <div class="contribute-card">
                    <div class="card-icon">üìä</div>
                    <h3>Add Intel</h3>
                    <p>Missing weapon stats? Fork, edit CSV, submit PR.</p>
                    <a href="https://github.com/henryabraham52/BF6_TTK/blob/master/CONTRIBUTING.md#adding-weapon-data" class="btn-primary">Contribute</a>
                </div>
                <div class="contribute-card">
                    <div class="card-icon">üîç</div>
                    <h3>Report Issues</h3>
                    <p>Found incorrect data or system errors?</p>
                    <a href="https://github.com/henryabraham52/BF6_TTK/issues/new?template=bug_report.yml" class="btn-primary">File Report</a>
                </div>
                <div class="contribute-card">
                    <div class="card-icon">‚ö°</div>
                    <h3>Request Features</h3>
                    <p>Ideas for enhanced tactical analysis?</p>
                    <a href="https://github.com/henryabraham52/BF6_TTK/issues/new?template=feature_request.yml" class="btn-primary">Submit Request</a>
                </div>
            </div>
        </section>

        <!-- Methodology Section -->
        <section class="methodology-section">
            <h2>üßÆ Calculation Methodology</h2>
            <div class="methodology-content">
                <pre><code lang="javascript">// Time-to-Kill Formula (in milliseconds)
const PLAYER_HEALTH = 100;
const shotsToKill = Math.ceil(PLAYER_HEALTH / damagePerShot);
const timeBetweenShots = 60000 / rpm; // Convert RPM to ms
const ttk = (shotsToKill - 1) * timeBetweenShots;

// Example: M433 at 10M
// Damage: 25, RPM: 830
// Shots to kill: ceil(100/25) = 4
// Time between shots: 60000/830 = 72.3ms
// TTK: (4-1) * 72.3 = 216.9ms</code></pre>
                <p><strong>Assumptions:</strong></p>
                <ul>
                    <li>Player health: 100 HP</li>
                    <li>All body shots (no headshot multipliers)</li>
                    <li>No armor or damage reduction</li>
                    <li>Perfect accuracy (all shots hit)</li>
                    <li>No bullet velocity or drop considerations</li>
                </ul>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Battlefield Community //
                <a href="https://github.com/henryabraham52/BF6_TTK/blob/master/LICENSE">MIT License</a> //
                <a href="https://github.com/henryabraham52/BF6_TTK">Repository</a> //
                <a href="https://github.com/henryabraham52/BF6_TTK/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a>
            </p>
            <p class="disclaimer">[ COMMUNITY PROJECT // NOT AFFILIATED WITH EA OR DICE ]</p>
        </div>
    </footer>

    <!-- JavaScript Modules -->
    <script src="js/utils.js"></script>
    <script src="js/data.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
